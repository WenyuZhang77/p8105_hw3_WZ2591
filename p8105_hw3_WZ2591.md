p8105\_hw2\_WZ2591
================
Wenyu Zhang
10/17/2021

``` r
library(tidyverse)
```

    ## ── Attaching packages ─────────────────────────────────────── tidyverse 1.3.1 ──

    ## ✓ ggplot2 3.3.5     ✓ purrr   0.3.4
    ## ✓ tibble  3.1.4     ✓ dplyr   1.0.7
    ## ✓ tidyr   1.1.3     ✓ stringr 1.4.0
    ## ✓ readr   2.0.1     ✓ forcats 0.5.1

    ## ── Conflicts ────────────────────────────────────────── tidyverse_conflicts() ──
    ## x dplyr::filter() masks stats::filter()
    ## x dplyr::lag()    masks stats::lag()

# Problem 1

## load the data from the p8105.datasets

``` r
library(p8105.datasets)
data("instacart")
```

## Do some exploration of this dataset

Size of the data: The dataset contains 1384617 observations and 15
variables.

Structure of the data: The data is about the information of online
grocery orders from Instacart users. Each row represent one order of one
product from Instacart users. The dataset have 15 variables: eval\_set,
product\_name, aisle, department, order\_id, product\_id,
add\_to\_cart\_order, reordered, user\_id, order\_number, order\_dow,
order\_hour\_of\_day, days\_since\_prior\_order, aisle\_id and
department\_id.

## Describing some key variables, and giving illstrative examples of observations

### The mean of variable `reordered` is 0.5985944, and it means about 60% products are reordered.

``` r
mean(pull(instacart, reordered))
```

    ## [1] 0.5985944

### The variable `order_hour_of_day` menas the time that the order was placed, and it shows most orders are placed at 14, which is at 2pm

``` r
names(sort(table(pull(instacart, order_hour_of_day)),decreasing=TRUE))[1]
```

    ## [1] "14"

### The mean value of `days_since_prior_order` is 17.0661259, which means people usually orders again after 17 days. And most of people order after 30 days from the prior order

``` r
mean(pull(instacart, days_since_prior_order))
```

    ## [1] 17.06613

``` r
names(sort(table(pull(instacart, days_since_prior_order)),decreasing=TRUE))[1]
```

    ## [1] "30"

### This means Banana is the product that users order most.

``` r
names(sort(table(pull(instacart, product_name)),decreasing=TRUE))[1]
```

    ## [1] "Banana"

### This is the data of the second row. It tells us that a users placed a order of Organic 4% Milk Fat Whole Milk Cottage Cheese from other creams cheeses aisle, which is 108 aisle from the department of dairy eggs. The order was placed in 10 am Thursday, and it is 9 days since prior order.

``` r
instacart[2,] %>% knitr::kable()
```

| order\_id | product\_id | add\_to\_cart\_order | reordered | user\_id | eval\_set | order\_number | order\_dow | order\_hour\_of\_day | days\_since\_prior\_order | product\_name                                 | aisle\_id | department\_id | aisle                | department |
|----------:|------------:|---------------------:|----------:|---------:|:----------|--------------:|-----------:|---------------------:|--------------------------:|:----------------------------------------------|----------:|---------------:|:---------------------|:-----------|
|         1 |       11109 |                    2 |         1 |   112108 | train     |             4 |          4 |                   10 |                         9 | Organic 4% Milk Fat Whole Milk Cottage Cheese |       108 |             16 | other creams cheeses | dairy eggs |

## Answer the following (commenting on the results of each):

### How many aisles are there, and which aisles are the most items ordered from?

There are 134 aisles and the most items are ordered form fresh
vegetables

``` r
length(unique(pull(instacart, aisle)))
names(sort(table(pull(instacart, aisle)),decreasing=TRUE))[1]
```

### Make a plot that shows the number of items ordered in each aisle

``` r
aisle = 
  instacart %>% 
  count(aisle, name = 'number_of_items') %>%
  filter(number_of_items > 10000) %>% 
  ggplot(aes(reorder(aisle, number_of_items), x = number_of_items)) + 
  geom_point() + 
  labs(
    title = "the number of items ordered in each aisle with more than 10000 items ordered",
    x = "Number of items ordered in each aisle",
    y = "Aisle name",
    caption = "the data was loaded from the p8105.datasets"
  )

aisle
```

![](p8105_hw3_WZ2591_files/figure-gfm/unnamed-chunk-10-1.png)<!-- -->

### Make a table showing the three most popular items in each of the aisles “baking ingredients”, “dog food care”, and “packaged vegetables fruits”.

``` r
Three_pop_items = 
  instacart %>%
  group_by(aisle) %>%
  filter(aisle == "baking ingredients" | aisle == "dog food care" | aisle == "packaged vegetables fruits") %>% 
  count(product_name, name = 'number_of_ordered_time') %>%
  top_n(n = 3, wt = number_of_ordered_time) %>% 
  arrange(desc(number_of_ordered_time)) %>%
  rename(
    'aisle name' = aisle, 
    'three most popular items in this aisle' = product_name, 
    'number of ordered time' = number_of_ordered_time
    ) %>% 
  knitr::kable()

Three_pop_items
```

| aisle name                 | three most popular items in this aisle        | number of ordered time |
|:---------------------------|:----------------------------------------------|-----------------------:|
| packaged vegetables fruits | Organic Baby Spinach                          |                   9784 |
| packaged vegetables fruits | Organic Raspberries                           |                   5546 |
| packaged vegetables fruits | Organic Blueberries                           |                   4966 |
| baking ingredients         | Light Brown Sugar                             |                    499 |
| baking ingredients         | Pure Baking Soda                              |                    387 |
| baking ingredients         | Cane Sugar                                    |                    336 |
| dog food care              | Snack Sticks Chicken & Rice Recipe Dog Treats |                     30 |
| dog food care              | Organix Chicken & Brown Rice Recipe           |                     28 |
| dog food care              | Small Dog Biscuits                            |                     26 |
